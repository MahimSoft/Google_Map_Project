        <!-- Pagination (includes all filter params) -->
        {% if is_paginated %}
        <nav class="mt-3 flex items-center justify-center space-x-1">
            {% if page_obj.has_previous %}
                <a href="?page={{ page_obj.previous_page_number }}{% if request.GET.person_id %}&person_id={{ request.GET.person_id }}{% else %}&person_id=0{% endif %}{% if request.GET.year %}&year={{ request.GET.year }}{% else %}&year=0{% endif %}{% if request.GET.month %}&month={{ request.GET.month }}{% else %}&month=0{% endif %}" class="px-2 py-1 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">Previous</a>
            {% endif %}
            <!-- TODO: New Code -->
             {# Loop through the page numbers provided by the paginator #}
            {% for i in page_obj.paginator.get_elided_page_range %}
            {# 1. Check if 'i' is the current page being viewed #}
            {% if page_obj.number == i %}
                <span class="px-2 py-1 bg-blue-600 border border-blue-600 rounded-md text-sm font-medium text-white">
                    {{ i }}
                </span>
            
            {# 2. Check if 'i' is the ellipsis (the "...") #}
            {% elif i == page_obj.paginator.ELLIPSIS %}
                <span class="px-2 py-1 text-gray-500">
                    {{ i }}
                </span>
            
            {# 3. Otherwise, it's a clickable page link #}
            {% else %}
                <a href="?page={{ i }}{{ extra_url_params }}" 
                class="px-2 py-1 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                    {{ i }}
                </a>
            {% endif %}
            
        {% endfor %}
        <!-- TODO: New Code end -->
            <span class="px-2 py-1 text-sm text-gray-500">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}{% if request.GET.person_id %}&person_id={{ request.GET.person_id }}{% else %}&person_id=0{% endif %}{% if request.GET.year %}&year={{ request.GET.year }}{% else %}&year=0{% endif %}{% if request.GET.month %}&month={{ request.GET.month }}{% else %}&month=0{% endif %}" class="px-2 py-1 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">Next</a>
            {% endif %}
        </nav>
        {% endif %}
        